{% load static %}

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verificación de Código - Anuario</title>

  <!-- Font Awesome (para los íconos) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- MDBootstrap CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.0/mdb.min.css" rel="stylesheet">
  
  <!-- Tus estilos -->
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
  {% block injected_css %}
    <link rel="stylesheet" href="{% static 'css/register_login.css' %}">
  {% endblock %}
</head>
<body>
  {% block content %}
  <div class="backgound_login">
    <div class="container min-vh-100 d-flex justify-content-center align-items-center">
      <div class="card p-4 shadow-4 text-center" style="width: 100%; max-width: 600px;">
  
        <div class="card-glass text-center">
          <h2 class="fw-bold mb-4">Genera tu código</h2>
          <form method="POST">
            {% csrf_token %}
              <label for="nombre">Nombre:</label>
              <input type="text" name="nombre" required>
              <label for="descripcion">Descripción:</label>
              <input type="text" name="descripcion" required>
              <button type="generar" class="btn btn-primary">Generar</button>
          </form>
          {% if codigo_generado %}
              <p><strong>Código generado:</strong> {{ codigo_generado }}</p>
          {% endif %}
            {% if messages %}
              <div>
                {% for message in messages %}
                  <div class="alert alert-{{ message.tags }}">{{ message }}</div>
                {% endfor %}
              </div>
            {% endif %}
          {% if codigos %}
              <div class="mt-4">
                  <h4 class="text-white">Códigos generados:</h4>
                  {% for groupcode in codigos %}
                  {% if groupcode.nombre %}
                      <div class="card-glass mt-3 p-3">
                          <p><strong>Nombre:</strong> {{ groupcode.nombre }}</p>
                          <p><strong>Código:</strong> {{ groupcode.code }}</p>
                          <a href="{% url 'prueba' grupo.nombre %}" class="btn btn-primary">Ver más</a>
                      </div>
                  {% else %}
                  <!-- Opcional: muestra algo si no tiene nombre -->
                      <div class="card-glass mt-3 p-3">
                          <p><strong>Código:</strong> {{ groupcode.code }}</p>
                          <p class="text-warning">Este código no tiene nombre asignado.</p>
                      </div>
                  {% endif %}
              {% endfor %}
              </div>
          {% endif %}
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
    
    <!-- Font Awesome for icons -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  
</body>
</html>
